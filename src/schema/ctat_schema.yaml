$schema: "http://json-schema.org/draft-07/schema#"
title: Cell Type Annotation
type: array
items: { $ref : '#/definitions/column_definition' }
additionalProperties: False


definitions:

  column_definition:
    oneOf:
      - { $ref: "#/definitions/hierarchical_column_definition" }
      - { $ref: "#/definitions/annotation_column_definition" }

  hierarchical_column_definition:
    required: [ 'column_name', 'column_type', 'rank' ]
    additionalProperties: False
    properties:
      column_name:
        type: string
        description: >
          Name of a column in the original spreadsheet/tsv.  
          Only name columns here that you can specify a type for in the column_type config, 
           all other columns will be preserved.
      column_type:
        description: "Type of the column"
        enum:
          cluster_id
          cluster_name
          cell_set
      rank:
        description: "Use this to number hierarchical cell sets, starting at 0 for cluster (leaf nodes)"
        type: number

  annotation_column_definition:
    required: [ 'column_name', 'column_type' ]
    additionalProperties: False
    properties:
      column_name:
        type: string
        description: >
          Name of a column in the original spreadsheet/tsv.  
          Only name columns here that you can specify a type for in the column_type config, 
           all other columns will be preserved.
      column_type:
        description: "Type of the column"
        enum:
          annotation_field
      column_mapping:
        description: "Column's mapping to a cell type annotation standard field."
        enum:
          cell_type_ontology_term_id
          cell_type_name
          brain_region_ontology_term_id
          brain_region_name
          marker_ontology_term_id
          evidence_markers
          marker_confidence_score



